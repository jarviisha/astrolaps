<section id="welcome" class="relative flex h-screen w-full justify-center">
  <!-- Fade overlay for scroll effect -->
  <div
    id="fade-overlay"
    class="pointer-events-none absolute inset-0 -z-10 h-[200vh] opacity-0 transition-opacity duration-300 ease-out"
  ></div>
  
  <!-- Background image -->
  <div class="pointer-events-none absolute inset-0 -z-20 h-[200vh] select-none bg-black">
    <img 
      src="/bg.jpeg" 
      alt="Background" 
      class="h-full w-full object-cover"
      loading="eager"
      fetchpriority="high"
    />
  </div>
  
  <!-- Rubik cube -->
  <div id="rubik-cube" class="absolute right-1 top-2 z-10 w-1/2"></div>
  
  <!-- Main content -->
  <div class="container mx-auto flex h-full pt-36">
    <div class="z-50 flex w-full">
      <div class="flex w-full flex-col gap-4">
        <!-- Hero text -->
        <h1 class="floating-text z-10 pb-4 font-header text-[240px] leading-none tracking-tight text-white">
          great
          <span class="highlighted-text">software</span><br />
          is not just built, it's <span class="highlighted-text">crafted!</span>
        </h1>
        
        <!-- CTA button -->
        <div class="z-50 flex w-full items-center pl-2">
          <a 
            href="#contact" 
            class="rounded-full border px-6 py-4 text-2xl text-white transition-all duration-300 hover:bg-white hover:text-black"
            aria-label="Contact us"
          >
            Let's talk
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<style>

  /* Fade overlay gradient */
  #fade-overlay {
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.5) 20%,
      rgba(0, 0, 0, 0.5) 40%,
      rgba(0, 0, 0, 0.7) 60%,
      rgba(0, 0, 0, 0.9) 80%,
      rgba(0, 0, 0, 1) 100%
    );
  }


</style>

<script type="module">
  // Optimized scroll handler with throttling
  let ticking = false;

  function updateFadeOverlay() {
    const overlay = document.getElementById("fade-overlay");
    if (!overlay) return;

    const maxHeight = window.innerHeight;
    const scrollY = window.scrollY;
    const opacity = Math.min(scrollY / maxHeight, 1);

    overlay.style.opacity = opacity.toString();
    ticking = false;
  }

  function onScroll() {
    if (!ticking) {
      requestAnimationFrame(updateFadeOverlay);
      ticking = true;
    }
  }

  // Use passive listener for better performance
  window.addEventListener("scroll", onScroll, { passive: true });

  // Cleanup on page unload
  window.addEventListener("beforeunload", () => {
    window.removeEventListener("scroll", onScroll);
  });
</script>

<script src="../scripts/rubik.js"></script>
